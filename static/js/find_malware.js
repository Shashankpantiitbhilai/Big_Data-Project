// document.addEventListener('DOMContentLoaded', function() {
//     document.getElementById('fileUploadForm').addEventListener('submit', function(event) {
//         event.preventDefault(); 
//         console.log('Form submitted');
//         let formData = new FormData();
//         formData.append('file', document.getElementById('file').files[0]); // Append the file data
        
//         console.log('Uploading file');
//         fetch('http://localhost:5000/upload', {
//             method: 'POST',
//             body: formData
//         }).then(response => {
//             console.log(response);
//             if (response.ok) {
//                 $('#fileUploadModal').modal('hide'); // Hide the modal
//                 alert('File uploaded successfully!');
//             } else {
//                 response.json().then(data => {
//                     alert(data.error || 'Error uploading file');
//                 });
//             }
//         }).catch(error => {
//             console.error('Error:', error);
//             alert('Error uploading file');
//         });
//     });
// });

// document.addEventListener('DOMContentLoaded', function() {
//     document.getElementById('fileUploadForm').addEventListener('submit', function(event) {
//         event.preventDefault(); 
//         console.log('Form submitted');
//         let formData = new FormData();
//         formData.append('file', document.getElementById('file').files[0]); // Append the file data
        
//         console.log('Uploading file');
//         let fileType = document.querySelector('input[name="fileType"]:checked').value;
//         let uploadUrl = (fileType === 'exec_files') ? 'http://localhost:5000/upload_exe' : 'http://localhost:5000/upload';
//         console.log(uploadUrl);
//         fetch(uploadUrl, {
//             method: 'POST',
//             body: formData
//         }).then(response => {
//             console.log(response);
//             if (!response.ok) {
//                 $('#fileUploadModal').modal('hide'); // Hide the modal
//                 alert('Error');
//             } else {
//                 response.json().then(data => {
//                     alert(data.error || 'Error uploading file');
//                 });
//             }
//         }).catch(error => {
//             console.error('Error:', error);
//             alert('Error uploading file');
//         });
//     });
// });
document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('fileUploadForm').addEventListener('submit', function(event) {
        event.preventDefault(); 
        console.log('Form submitted');
        let formData = new FormData();
        formData.append('file', document.getElementById('file').files[0]); // Append the file data
        
        console.log('Uploading file');
        let fileType = document.querySelector('input[name="fileType"]:checked').value;
        let uploadUrl = (fileType === 'exec_files') ? 'http://localhost:5000/result' : 'http://localhost:5000/upload';
        console.log(uploadUrl);
        fetch(uploadUrl, {
            method: 'POST',
            body: formData
        }).then(response => {
            console.log(response);
            if (!response.ok) {
                response.json().then(data => {
                    alert(data.error || 'Error uploading file');
                });
            }
        }).catch(error => {
            console.error('Error:', error);
            alert('Error uploading file');
        });
    });
});
